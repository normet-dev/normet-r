% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/nm_causal_placebo.r
\name{nm_placebo_in_time}
\alias{nm_placebo_in_time}
\title{Perform a Placebo-in-Time Analysis}
\usage{
nm_placebo_in_time(
  df,
  min_pre_period = 30,
  placebo_every = 7,
  verbose = TRUE,
  ...
)
}
\arguments{
\item{df}{A long-format panel data frame.}

\item{min_pre_period}{The minimum number of pre-period data points required for a
placebo run.}

\item{placebo_every}{The interval (in number of time points) at which to select
placebo dates (e.g., every 7 days).}

\item{verbose}{Should the function print log messages and a progress bar?
Default is `TRUE`.}

\item{...}{Arguments passed to the SCM dispatcher (`nm_run_syn`), such as `unit_col`,
`outcome_col`, `treated_unit`, `cutoff_date`, `donors`, and `scm_backend`.}
}
\value{
A list containing the following elements:
\describe{
  \item{treated}{The data frame of results for the true treated unit and cutoff date.}
  \item{placebos}{A list where each element is a numeric vector representing the effect path from a single placebo run.}
  \item{p_value}{A p-value estimated from comparing the true effect to the distribution of placebo effects.}
  \item{ref_band_event_time}{A data frame containing quantiles and mean of placebo effects, aligned to "event time" (time since intervention).}
  \item{placebo_stats}{A numeric vector of the aggregated post-period statistics for each placebo run.}
}
}
\description{
`nm_placebo_in_time` tests significance by running the SCM analysis multiple times
with fake "treatment" dates that occur before the actual treatment date. This
version is updated to run the 'mlscm' backend serially to prevent H2O conflicts
and includes memory management.
}
