% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/nm_causal_bands.r
\name{nm_uncertainty_bands}
\alias{nm_uncertainty_bands}
\title{Build Uncertainty Bands from Bootstrap or Jackknife Results}
\usage{
nm_uncertainty_bands(
  df,
  date_col,
  unit_col,
  outcome_col,
  treated_unit,
  cutoff_date,
  donors = NULL,
  scm_backend = "scm",
  method = "jackknife",
  B = 200,
  seed = 7654321,
  donor_frac = 0.8,
  time_block_days = NULL,
  ci_level = 0.95,
  verbose = TRUE,
  ...
)
}
\arguments{
\item{df}{A long-format panel data frame.}

\item{date_col}{Name of the date column.}

\item{unit_col}{Name of the unit identifier column.}

\item{outcome_col}{Name of the outcome variable column.}

\item{treated_unit}{The treated unit identifier.}

\item{cutoff_date}{The intervention cutoff date.}

\item{donors}{Optional character vector of donor units.}

\item{scm_backend}{The synthetic control method to use: \code{"scm"} or \code{"mlscm"}.}

\item{method}{Uncertainty estimation method: \code{"bootstrap"} or \code{"jackknife"}.}

\item{B}{Number of bootstrap replications (used if method is \code{"bootstrap"}).}

\item{seed}{Random seed for reproducibility (used if method is \code{"bootstrap"}).}

\item{donor_frac}{Fraction of donors to sample in each bootstrap replication.}

\item{time_block_days}{Size of time blocks for bootstrap resampling.}

\item{ci_level}{Confidence interval level (e.g., 0.95 for 95\% bands).}

\item{verbose}{Logical; should the function print log messages (INFO/WARN)? Default is \code{TRUE}.}

\item{...}{Additional arguments passed to the SCM dispatcher \code{nm_run_scm}.}
}
\value{
A list containing:
\describe{
  \item{treated}{A data frame with the original effect path for the treated unit.}
  \item{low}{A named numeric vector of the lower uncertainty band.}
  \item{high}{A named numeric vector of the upper uncertainty band.}
  \item{jackknife_effects}{(Optional, if method is \code{"jackknife"}) A data frame with effect paths from each jackknife run.}
}
}
\description{
Construct confidence bands for the treatment effect using either
nonparametric bootstrap or leave-one-donor-out jackknife methods.
}
